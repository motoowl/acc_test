<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link></head><body>
<div><b><font size="4">Обработка предназначена для проведения дымового тестирования всех форм и объектов конфигурации.</font></b></div>
<div><br></div>
<div><b><font size="3">Работает в файловом режиме с базами на русском и английском языке, в конфигурации которых есть БСП.</font></b></div>
<div><br></div>
<div><br></div>
<div><b><font size="2">Обработка может проверять:</font></b></div>
<div><br></div>
<div> - открытие форм:</div>
<div>   - без параметров</div>
<div>   - форму документа/элемента:</div>
<div>     - с ключом в виде ссылки на элемент</div>
<div><span class="Apple-tab-span" style="white-space:pre">	</span> - форму копирования элемента</div>
<div>   </div>
<div> - действия над элементами объектов метаданных (только под пользователем с ролями ПолныеПрава и АдминистраторСистемы):</div>
<div>   - копирование</div>
<div>   - пометка на удаление</div>
<div>   - удаление помеченных</div>
<div>   </div>
<div> - формирование отчетов в фоне (аналогично Рассылке отчетов)</div>
<div> </div>
<div> - регламентные задания (только под пользователем с ролями ПолныеПрава и АдминистраторСистемы)</div>
<div><br></div>
<div><br></div>
<div><b><font size="2">В обработке есть следующие настройки:</font></b></div>
<div><br></div>
<div> - Эмулировать модель сервиса</div>
<div> - Длительность открытия формы в секундах</div>
<div> - Полный путь к файлу настроек (по умолчанию заполняется по имени обработки, но с расширением .yaml)</div>
<div> - Каталог файлов ошибок</div>
<div> - Путь к файлу протокола (это каталог, по умолчанию совпадает с каталогом файлов ошибок)</div>
<div> - Файл результата</div>
<div> - Путь к файлу таблицы протестированных форм</div>
<div> - Время выполнения регламентных заданий в секундах</div>
<div> - Проверять копирование и удаление</div>
<div><br></div>
<div>Файл настроек имеет синтаксис yaml, в начале файла есть подробное описание.</div>
<blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">
<div><br></div></blockquote>
<div>Обработка может запускаться интерактивно и в пакетном режиме.</div>
<div><br></div>
<div>Формат командной строки для пакетного запуска:</div>
<div>"&lt;ПутьКФайлу 1cv8.exe&gt;" ENTERPRISE /F "&lt;ПутьКПапке&gt;" /C "&lt;ПутьККаталогуБазы&gt;" /DEBUG /DisableStartupDialogs /DisableStartupMessages /N "&lt;ИмяПользователяДляЗапускаТеста&gt;" /Execute "&lt;ПутьКФайлуОбработкиДымовогоТеста&gt;" /C [--&lt;ИмяПараметра&gt; &lt;ЗначениеПараметра&gt;] /DisableUnrecoverableErrorMessage</div>
<div><br></div>
<div><br></div>
<div><b><font size="2">Описание работы:</font></b></div>
<div><br></div>
<div>1. При запуске в интерактивном режиме откроется дерево форм.</div>
<div>Недоступные для проверки формы и регламентные задания будут зачёркнуты и без галочки.</div>
<div>По умолчанию все элементы дерева выбраны.</div>
<div><br></div>
<div>2. Для старта теста нужно нажать "Выполнить тест".</div>
<div><br></div>
<div>3. Обработка открывает формы по порядку. Если форма открылась успешно, открывается следующая.</div>
<div>Если же возникла ошибка, она записывается в файл XML с именем в формате "&lt;Формат(ТекущаяДата(), ДФ="ггггММддЧЧммсс")&gt;_&lt;УникальныйИдентификаторОшибки&gt;".</div>
<div>Этот файл может использоваться для регистрации ошибки в Системе проектирования прикладных решений (СППР).</div>
<div>Также создаётся папка (ИмяПапки = "&lt;УникальныйИдентификаторОшибки&gt;") с вложенными файлами: скриншот, журнал открытия форм и таблица последними 300 записями журнала регистрации.</div>
<div><br></div>
<div>4. Если тест завис или 1С закрылась до завершения теста, то при следующем запуске теста он продолжится со следующей формы.</div>
<div><br></div>
<div>5. После завершения теста выполняется анализ журнала регистрации:</div>
<div>Ошибки из ЖР регистрируются в такие же XML-файлы, но без папок с приложенными файлами.</div>
<div>Так же в файл XLSX выгружаются все ошибки журнала регистрации с момента начала теста.</div>
<div><br></div>
<div><br></div>
<div><b><font size="2">Файл настроек:</font></b></div>
<div><br></div>
<div>При интерактивном запуске имя файла настроек без расширения должно совпадать с именем обработки дымового теста.</div>
<div>При пакетном запуске необходимо указать полный путь к файлу настроек в параметре с именем "ФайлНастроек".</div>
<div><b><br></b></div>
<div>Перед запуском обработки необходимо отредактировать параметры путей к служебным каталогам:</div>
<div><br></div>
<div>1. "ПутьКФайлуПротокола" - путь к папке, в которой будет храниться протокол выполнения дымового теста;</div>
<div>2. "КаталогФайловОшибок" - путь к папке, в которую будут сохраняться файлы ошибок.</div>
<div><br></div>
<div><br></div>
<div><font size="2"><b>Описание настроек:</b></font></div>
<div><br></div>
<div>
<div>Параметры форм надо указать так, что бы они были доступны для пользователя с минимальными правами Пользователь.</div>
<div>Тестирование необходимо проводить под 3 пользователями: Пользователь, Руководитель, Администратор</div>
<div><br></div>
<div>Область ПараметрическиеРегламентныеЗадания содержит список параметрических регламентных заданий. На данном этапе они исключаются из проверки.</div>
<div>Область ОбъектыЗахватываемыеДляРедактирования содержит список объектов метаданных, для которых проверка действий над элементами выполняется дважды - для захваченного и незахваченного для редактирования объекта.</div>
<div>Область Открытие.ПараметризуемыеФормы содержит список форм, которые будут открыты с указанными параметрами.</div>
<div>Область Копирование.ПараметризуемыеФормы содержит список форм, которые скопированы с указанными параметрами.</div>
<div>Область ДействияНадЭлементами содержит параметризацию действий над элементами - копирование, пометка на удаление и удаление.</div>
<div>Область НепроверяемыеФормы включает список форм, которые будут исключены из проверки </div>
<div>Область Объекты включает список объектов, у которых описана особенность поведения при установке пометки удаления или удаления их.</div>
<div>Область НегативныеСценарии включает список форм, у которых при открытии, записи, либо закрытии ожидается ошибка, если ошибка не будет выявлена, то обработка зарегистрирует ошибку.</div>
<div><br></div>
<div>Если требуется несколько раз вызвать формы с разными параметрами, то необходимо описать каждый случай как описание отдельной формы.</div>
<div>Пример:</div>
<div>[ОбщаяФорма.Форма1]</div>
<div>Ключ: Значение1 // Вариант вызова 1</div>
<div>[ОбщаяФорма.Форма1]</div>
<div>Ключ: Значение2 // Вариант вызова 2</div>
<div><br></div>
<div><b>Примеры описания типов параметров открытия формы:</b></div>
<div>В описании параметров необходимо использовать язык разметки YAML.</div>
<div>Основные положения данного языка, используемые при чтении параметров:</div>
<div> - Параметр формы должен начинаться с новой строки, без отступов;</div>
<div> - После указания параметра ставится двоеточие, после чего указывается значение параметра;</div>
<div> - Если в начале значения указана звездочка *, то значение помещается во временное хранилище и возвращается ссылка на него;</div>
<div> - Если тип не был распознан, то он воспринимается как строка;</div>
<div> - Для создания многострочного текста необходимо в начале многострочной строки установить символ | (прямая черта), после чего с новой строки (с необходимым отступом) указывается сама многострочная строка;</div>
<div> - При указании составных типов необходимо явно указать путем !!&lt;тип&gt; (например, !!Массив, !!Структура и т.д.);</div>
<div> - При указании составных типов, важно соблюдать отступы. Один уровень = 2 пробела.</div>
<div><br></div>
<div><b>Примитивные типы:</b></div>
<div>Параметр: "текст предупреждения" // Строка</div>
<div>Параметр: |</div>
<div>  первая строка</div>
<div>  вторая строка" // Многострочная строка</div>
<div>Параметр: 123 // Число (значение должно содержать только цифры)</div>
<div>Параметр: Истина // Булево</div>
<div>Параметр: Неопределено // Неопределено</div>
<div>Параметр: 2010/01/03 // Дата, формат строго в виде ГГГГ/ММ/ДД</div>
<div>Параметр: 2010/01/03 14:59:00 // Дата и время, формат строго в виде ГГГГ/ММ/ДД ЧЧ:ММ:СС</div>
<div><br></div>
<div><b>Ссылочные типы:</b></div>
<div>Ссылка на объект (в качестве параметра будет передана ссылка на объект):</div>
<div>Параметр: e1cib/data/Справочник.Пользователи?ref=a1ba005056c0000811de8d7ee7e28f7a // Ссылка на объект</div>
<div>Параметр: e1cib/data/Справочник._ДемоПартнеры?ref=00000000000000000000000000000000 // пустая ссылка</div>
<div>Параметр: Перечисление.СпособыОтображенияПодсказок.ЗнакВопросаСправа // Перечисление</div>
<div>Параметр: Перечисление.СпособыОтображенияПодсказок.ПустаяСсылка // Перечисление пустая ссылка</div>
<div><br></div>
<div><b>Описание типов:</b></div>
<div>Параметр: ОписаниеТипов("СправочникСсылка._ДемоПартнеры")</div>
<div><br></div>
<div><b>Стандартный период:</b></div>
<div>Параметр: СтандартныйПериод(2010/01/03;2010/02/03) // СтандартныйПериод(ДатаНачала;ДатаОкончания)</div>
<div> </div>
<div><b>Примеры описания составных типов:</b></div>
<div>Параметр: !!Массив</div>
<div>  - 1</div>
<div>  - 2</div>
<div>  - 3 // Массив со значениями 1, 2 и 3</div>
<div>Параметр: [1,2,3] // Массив со значениями 1, 2 и 3</div>
<div>Параметр: !!Массив // пустой массив, как Параметр = Новый Массив;</div>
<div><br></div>
<div>Параметр: !!Структура</div>
<div>  Регион: 1</div>
<div>  Район: 2</div>
<div>  Город: 3 // Структура, где: КЛЮЧ: ЗНАЧЕНИЕ</div>
<div><br></div>
<div>Параметр: *!!Структура</div>
<div>  Регион: 1</div>
<div>  Район: 2</div>
<div>  Город: 3 // Структура, которая будет помещена во временное хранилище, где: КЛЮЧ: ЗНАЧЕНИЕ</div>
<div><br></div>
<div>Параметр: {Регион: 1, Район: 2, Город: 3} // Структура, где: КЛЮЧ: ЗНАЧЕНИЕ</div>
<div><br></div>
<div>Параметр: !!СписокЗначений</div>
<div>  0: Регион</div>
<div>  1: Район</div>
<div>  2: Город // Список значений, где: ИНДЕКС: ЗНАЧЕНИЕ</div>
<div><br></div>
<div>Параметр: !!Соответствие</div>
<div>  Регион: 1</div>
<div>  Район: 2</div>
<div>  Город: 3 // Соответствие, где: КЛЮЧ: ЗНАЧЕНИЕ</div>
<div><br></div>
<div><b>Варианты указания таблицы значений с колонками "Представление", "ЭтоРаздел", "Идентификатор" и двумя строками:</b></div>
<div>Данная таблица будет преобразована в тип "ДанныеФормыКоллекция". если перед "!!ТаблицаЗначений" указать символ * (звездочка), то таблица будет помещена во временное хранилище:</div>
<div>Параметр: !!ТаблицаЗначений</div>
<div>  Представление,ЭтоРаздел,Идентификатор</div>
<div>  - [Дела,Истина,2]</div>
<div>  - [Встреча,Ложь,3]</div>
<div><br></div>
<div>Параметр: !!ТаблицаЗначений</div>
<div>  Представление,ЭтоРаздел,Идентификатор</div>
<div>  - Дела</div>
<div>    Истина</div>
<div>    2</div>
<div>  - Встреча</div>
<div>    Ложь</div>
<div>    3</div>
<div><br></div>
<div>Параметр: *!!ТаблицаЗначений</div>
<div>  - Представление: Дела</div>
<div>    ЭтоРаздел: Истина</div>
<div>    Идентификатор: 2</div>
<div>  - Представление: Встреча</div>
<div>    ЭтоРаздел: Ложь</div>
<div>    Идентификатор: 3 // Данная таблица значений будет помещена во временное хранилище, т.к. перед указанием типа есть * (звездочка)</div>
<div><br></div>
<div><b>Аналогично Таблице значений можно указать в качестве типа Дерево значений:</b></div>
<div>Параметр: !!ДеревоЗначений</div>
<div>  Представление,ЭтоРаздел,Идентификатор</div>
<div>  - [Дела,Истина,2]</div>
<div>  - [Встреча,Ложь,3]</div>
<div><br></div>
<div><b>Примеры описания типов с несколькими уровнями вложенности:</b></div>
<div><br></div>
<div>Параметр: !!Массив</div>
<div>  - !!Структура</div>
<div>    Регион: 11</div>
<div>    Район: 12</div>
<div>    Город: 13</div>
<div>  - !!Структура</div>
<div>    Регион: 21</div>
<div>    Район: 22</div>
<div>    Город: 23 // Массив структур</div>
<div><br></div>
<div><b>Еще один вариант записи данного массива структур:</b></div>
<div>Параметр: !!Массив</div>
<div>  - {Регион: 11, Район: 12, Город: 13}</div>
<div>  - {Регион: 21, Район: 22, Город: 23}</div>
<div><br></div>
<div>Параметр: !!Структура</div>
<div>  Числа: !!Массив</div>
<div>    - 1</div>
<div>    - 2</div>
<div>    - 3 // Структура, у которой значением ключа "Числа" является массив</div>
<div><br></div>
<div><b>Для исключения элемента/объект из списка открытия или копирования</b></div>
<div>Пример:</div>
<div>&amp;Кроме: e1cib/data/Справочник.ГруппыДоступа?ref=b5786f0d29e6182246ca59783c39be2b</div>
<div><br></div>
<div><b>Для ограничения прав доступа к форме следует описать список пользователей демо-базы, которые имеют доступ к ней</b></div>
<div>Пример:</div>
<div>[Обработка.ЗагрузкаДанныхИзФайла.Форма.ЗагрузкаДанныхИзФайла]</div>
<div>&amp;Администратор, Руководитель // К форме имеет доступ, только пользователи Администратор и Руководитель</div>
<div>&amp;КромеРуководитель // К форме имеет доступ все пользователи, кроме пользователя Руководитель</div>
<div> </div>
<div><b>Если при открытии или копировании формы ожидается возникновении ошибки, то необходимо описать ее. </b></div>
<div>Достаточно указать фрагмента текста. </div>
<div>Пример:</div>
<div>[ОбщаяФорма.АвтономнаяРабота]</div>
<div>&amp;ОжидаемаяОшибка: Эта информационная база не является автономным рабочим местом</div>
<div><br></div>
<div><b>Для отчетов путь указывается в следующем формате:</b></div>
<div>[Отчет.&lt;ИмяОтчет&gt;.&lt;ТипФормы&gt;_&lt;ИмяВариантаОтчета&gt;]</div>
<div>Пример: </div>
<div>[Отчет.АнализЖурналаРегистрации.ФормаОбъекта_АнализАктивностиПользователей] — параметры для варианта АнализАктивностиПользователей.</div>
<div>[Отчет.АнализОпроса.ФормаОбъекта_] — параметры будут применены ко всем вариантам отчета.</div>
<div><br></div>
<div><b>В области НегативныеСценарии можно указать следующие параметры:</b></div>
<div>1) ТекстОшибки - текст ожидаемой ошибки;</div>
<div>2) Пользователь - пользователь, под которым ожидается ошибка. Если данные параметр отсутствует, то ошибка будет ожидаться под всеми пользователями;</div>
<div>3) Действие - действие, при котором возникает ошибки (параметр может принимать 3 значение: Открытие, Запись, Закрытие).</div>
<div><br></div>
<div><b>Расширения:</b></div>
<div>Глобальный параметр Расширения позволяет исключить из теста формы из расширений. </div>
<div>Если параметр указан, то тестироваться будут только формы перечисленных расширений. </div>
<div>Пример (в тест будут включены формы всех расширений с наименованием, начинающимся на _Демо и расширений с именем ТестОтчет):  </div>
<div> Расширения: _Демо*;ТестОтчет</div>
<div> </div>
<div><b>Запуск в пакетном режиме</b></div>
<div>Примеры:</div>
<div>--ФайлНастроек "d:\ДымовойТест\Дымовой тест всех форм и объектов.yaml;" --ВариантЗапуска Минимальный --КаталогФайловОшибок "D:\test"</div>
<div>--ФайлНастроек "d:\ДымовойТест\Дымовой тест всех форм и объектов.yaml;d:\ДымовойТест\Дымовой тест всех форм и объектов SSL_int.yaml" --КаталогФайловОшибок "D:\test"</div></div></body></html>